<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DFS Visualizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            min-height: 100vh;
        }

        .glass-card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .node {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border: 3px solid #a78bfa;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            position: absolute;
            transition: all 0.3s;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .node.visited {
            background: linear-gradient(135deg, #c084fc, #a855f7);
            border-color: #d8b4fe;
            box-shadow: 0 0 25px rgba(192, 132, 252, 0.5);
        }

        .node.current {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-color: #f87171;
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.6);
            transform: scale(1.2);
            z-index: 10;
        }

        .node.complete {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border-color: #4ade80;
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
        }

        .edge {
            stroke: #475569;
            stroke-width: 3;
        }

        .edge.visited {
            stroke: #a855f7;
            stroke-width: 4;
        }

        .console-box {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(74, 222, 128, 0.2);
        }

        .stack-item {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            padding: 8px 14px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 13px;
            box-shadow: 0 2px 10px rgba(139, 92, 246, 0.4);
        }

        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }

        .btn-secondary {
            background: rgba(71, 85, 105, 0.5);
            border: 1px solid rgba(148, 163, 184, 0.2);
        }

        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            cursor: pointer;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-ready {
            background: rgba(34, 197, 94, 0.2);
            color: #4ade80;
        }

        .status-running {
            background: rgba(139, 92, 246, 0.2);
            color: #c4b5fd;
        }

        .status-complete {
            background: rgba(139, 92, 246, 0.2);
            color: #ddd6fe;
        }
    </style>
</head>

<body class="text-white">
    <div class="container mx-auto p-6 max-w-6xl">
        <header class="mb-8">
            <a href="../home.html"
                class="inline-flex items-center gap-2 text-slate-400 hover:text-purple-400 transition mb-4 text-sm">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                Back to Home
            </a>
            <div class="flex items-center gap-4">
                <div
                    class="w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center text-2xl shadow-lg shadow-purple-500/30">
                    ðŸ”¬</div>
                <div>
                    <h1
                        class="text-3xl font-bold bg-gradient-to-r from-purple-400 to-violet-400 bg-clip-text text-transparent">
                        Depth-First Search</h1>
                    <p class="text-slate-400 text-sm">Go as deep as possible â€¢ O(V + E)</p>
                </div>
            </div>
        </header>
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            <div class="lg:col-span-3 space-y-4">
                <div class="glass-card rounded-2xl p-5">
                    <h2 class="text-lg font-semibold mb-4">Controls</h2>
                    <div class="space-y-4">
                        <div><label class="text-xs text-slate-400 uppercase">Start Node</label><select id="startNode"
                                class="w-full bg-slate-700/50 border border-slate-600 rounded-xl px-4 py-3 mt-2 text-white focus:outline-none focus:border-purple-500"></select>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-2"><span
                                    class="text-slate-400">Speed</span><span id="speedValue"
                                    class="text-purple-400 font-mono">Medium</span></div><input type="range"
                                id="speedSlider" min="300" max="1500" value="800"
                                class="slider w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                style="direction:rtl">
                        </div>
                        <div class="grid grid-cols-2 gap-3 pt-2">
                            <button onclick="resetGraph()"
                                class="btn-secondary py-2.5 rounded-xl font-semibold text-sm">Reset</button>
                            <button onclick="startDFS()" class="btn-primary py-2.5 rounded-xl font-semibold text-sm">â–¶
                                Start</button>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t border-slate-700/50 flex items-center justify-between"><span
                            class="text-slate-400 text-sm">Status</span><span id="statusBadge"
                            class="status-badge status-ready">Ready</span></div>
                </div>
                <div class="glass-card rounded-2xl p-4">
                    <h3 class="text-sm font-semibold text-slate-400 mb-2">Stack (Recursion)</h3>
                    <div id="stackContainer" class="flex flex-col-reverse gap-2 min-h-[44px]"></div>
                </div>
                <div class="glass-card rounded-2xl p-4">
                    <h2 class="font-semibold mb-2 text-sm"><span class="text-green-400">â€º_</span> Console</h2>
                    <div id="consoleOutput"
                        class="console-box h-32 overflow-y-auto p-2 rounded-xl text-xs text-green-400 font-mono"></div>
                </div>
            </div>
            <div class="lg:col-span-9">
                <div class="glass-card rounded-2xl p-6 min-h-[500px] relative">
                    <svg id="edgeCanvas" class="absolute inset-0 w-full h-full pointer-events-none"></svg>
                    <div id="graphContainer" class="relative w-full h-full"></div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const graph = { A: ['B', 'C'], B: ['A', 'D', 'E'], C: ['A', 'F'], D: ['B'], E: ['B', 'F'], F: ['C', 'E', 'G'], G: ['F'] };
        const positions = { A: [300, 60], B: [150, 150], C: [450, 150], D: [80, 270], E: [220, 270], F: [450, 270], G: [380, 380] };
        const graphCont = document.getElementById('graphContainer'), edgeCanvas = document.getElementById('edgeCanvas');
        const consoleOutput = document.getElementById('consoleOutput'), stackCont = document.getElementById('stackContainer');
        const statusBadge = document.getElementById('statusBadge'), startSelect = document.getElementById('startNode');
        const speedSlider = document.getElementById('speedSlider'), speedValue = document.getElementById('speedValue');
        let nodes = {}, isRunning = false, speed = 800;

        speedSlider.addEventListener('input', e => { speed = parseInt(e.target.value); speedValue.textContent = speed < 600 ? 'Fast' : speed < 1000 ? 'Medium' : 'Slow'; });
        function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }
        function log(msg, type = 'info') { const l = document.createElement('div'); l.className = 'py-1'; if (type === 'success') l.classList.add('text-blue-300'); if (type === 'visit') l.classList.add('text-purple-300'); l.innerText = 'â€º ' + msg; consoleOutput.appendChild(l); consoleOutput.scrollTop = consoleOutput.scrollHeight; }
        function setStatus(s) { statusBadge.className = 'status-badge'; statusBadge.classList.add(s === 'Ready' ? 'status-ready' : s === 'Running' ? 'status-running' : 'status-complete'); statusBadge.textContent = s === 'Running' ? 'Running...' : s; }

        function initGraph() {
            graphCont.innerHTML = ''; edgeCanvas.innerHTML = ''; startSelect.innerHTML = '';
            Object.keys(graph).forEach(id => { startSelect.innerHTML += `<option value="${id}">${id}</option>`; const [x, y] = positions[id]; const node = document.createElement('div'); node.className = 'node'; node.id = `node-${id}`; node.style.left = `${x}px`; node.style.top = `${y}px`; node.innerText = id; graphCont.appendChild(node); nodes[id] = node; });
            const drawn = new Set();
            Object.entries(graph).forEach(([from, neighbors]) => { neighbors.forEach(to => { const key = [from, to].sort().join('-'); if (!drawn.has(key)) { drawn.add(key); const [x1, y1] = positions[from], [x2, y2] = positions[to]; const line = document.createElementNS('http://www.w3.org/2000/svg', 'line'); line.setAttribute('x1', x1 + 25); line.setAttribute('y1', y1 + 25); line.setAttribute('x2', x2 + 25); line.setAttribute('y2', y2 + 25); line.setAttribute('class', 'edge'); line.id = `edge-${key}`; edgeCanvas.appendChild(line); } }); });
        }

        function resetGraph() { if (isRunning) return; Object.values(nodes).forEach(n => n.className = 'node'); document.querySelectorAll('.edge').forEach(e => e.classList.remove('visited')); stackCont.innerHTML = ''; consoleOutput.innerHTML = ''; setStatus('Ready'); }

        async function startDFS() { if (isRunning) return; isRunning = true; resetGraph(); setStatus('Running'); log(`Starting DFS from ${startSelect.value}`); const visited = new Set(); await dfs(startSelect.value, visited); log('DFS Complete!', 'success'); setStatus('Complete'); isRunning = false; }

        async function dfs(node, visited) {
            visited.add(node); updateStack([...visited]);
            nodes[node].classList.add('current'); log(`Visiting ${node}`, 'visit'); await sleep(speed);
            for (const neighbor of graph[node]) { if (!visited.has(neighbor)) { const edgeKey = [node, neighbor].sort().join('-'); document.getElementById(`edge-${edgeKey}`)?.classList.add('visited'); nodes[node].classList.remove('current'); nodes[node].classList.add('visited'); await dfs(neighbor, visited); nodes[node].classList.remove('visited'); nodes[node].classList.add('current'); updateStack([...visited].filter(n => !isComplete(n, visited))); await sleep(speed / 2); } }
            nodes[node].classList.remove('current'); nodes[node].classList.add('complete');
        }

        function isComplete(node, visited) { return graph[node].every(n => visited.has(n)); }
        function updateStack(s) { stackCont.innerHTML = s.slice().reverse().map(n => `<div class="stack-item">${n}</div>`).join(''); }
        initGraph();
    </script>
</body>

</html>
